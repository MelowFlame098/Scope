"use strict";exports.id=2724,exports.ids=[2724],exports.modules={9214:(e,s,t)=>{t.d(s,{N:()=>PricingPopup,Z:()=>m});var i=t(784),r=t(9885),a=t(6494),l=t(7932),n=t(6206),c=t(4901),d=t(1264),o=t(9033);let u=[{id:"basic",name:"Basic",price:4.99,period:"month",description:"Perfect for individual traders",features:["Real-time market data","Advanced charting tools","Price alerts & notifications","Technical indicators","Social trading features","Email support"],limits:{portfolios:5,watchlists:10},icon:i.jsx(a.Z,{className:"w-6 h-6"}),buttonText:"Start Basic Plan",buttonVariant:"primary"},{id:"premium",name:"Premium",price:9.99,period:"month",description:"For serious traders and investors",features:["Everything in Basic","AI-powered insights","Unlimited portfolios","Unlimited watchlists","Institutional-grade tools","Priority support","Advanced analytics","Custom indicators"],limits:{portfolios:"Unlimited",watchlists:"Unlimited"},popular:!0,icon:i.jsx(l.Z,{className:"w-6 h-6"}),buttonText:"Start Premium Plan",buttonVariant:"premium"}],PricingPopup=({isOpen:e,onClose:s,feature:t,requiredPlan:a,title:l,description:m})=>{let{user:x}=(0,o.useAuth)(),[p,h]=(0,r.useState)(null);if(!e)return null;let handleSubscribe=async e=>{h(e);try{let s=await fetch("/api/subscription/subscribe",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("access_token")}`},body:JSON.stringify({plan:e,feature:t})});s.ok?window.location.href=`/subscription/checkout?plan=${e}`:console.error("Subscription failed")}catch(e){console.error("Subscription error:",e)}finally{h(null)}},b=a?u.filter(e=>"basic"===a||"premium"===e.id):u;return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,i.jsxs)("div",{className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,i.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between rounded-t-2xl",children:[(0,i.jsxs)("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:(()=>{if(l)return l;switch(t){case"/dashboard/analytics":return"Advanced Analytics";case"/dashboard/ai-insights":return"AI-Powered Insights";case"/dashboard/social-trading":return"Social Trading";case"/dashboard/institutional":return"Institutional Tools";default:return"Premium Feature"}})()}),i.jsx("p",{className:"text-gray-600 mt-1",children:(()=>{if(m)return m;switch(t){case"/dashboard/analytics":return"Access advanced analytics and detailed market insights to make better trading decisions.";case"/dashboard/ai-insights":return"Get AI-powered market analysis and personalized trading recommendations.";case"/dashboard/social-trading":return"Follow top traders, copy their strategies, and share your own insights.";case"/dashboard/institutional":return"Access professional-grade tools used by institutional traders and fund managers.";default:return"This feature requires a subscription to access."}})()})]}),i.jsx("button",{onClick:s,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:i.jsx(n.Z,{className:"w-6 h-6"})})]}),x&&i.jsx("div",{className:"px-6 py-4 bg-blue-50 border-b border-gray-200",children:(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[i.jsx(c.Z,{className:"w-5 h-5 text-blue-600"}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("p",{className:"text-sm font-medium text-blue-900",children:["Current Plan: ",x.subscriptionPlan?.charAt(0).toUpperCase()+x.subscriptionPlan?.slice(1)||"Free"]}),i.jsx("p",{className:"text-xs text-blue-700",children:"Upgrade to access this feature and unlock more capabilities"})]})]})}),i.jsx("div",{className:"px-6 py-8",children:i.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:b.map(e=>(0,i.jsxs)("div",{className:`relative rounded-xl border-2 p-6 ${e.popular?"border-blue-500 bg-blue-50":"border-gray-200 bg-white"}`,children:[e.popular&&i.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:i.jsx("span",{className:"bg-blue-500 text-white px-3 py-1 rounded-full text-sm font-medium",children:"Most Popular"})}),(0,i.jsxs)("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"flex items-center justify-center mb-3",children:i.jsx("div",{className:`p-3 rounded-full ${e.popular?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-600"}`,children:e.icon})}),i.jsx("h3",{className:"text-xl font-bold text-gray-900",children:e.name}),i.jsx("p",{className:"text-gray-600 text-sm mt-1",children:e.description}),(0,i.jsxs)("div",{className:"mt-4",children:[(0,i.jsxs)("span",{className:"text-3xl font-bold text-gray-900",children:["$",e.price]}),(0,i.jsxs)("span",{className:"text-gray-600",children:["/",e.period]})]})]}),(0,i.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,i.jsxs)("div",{className:"text-sm",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center py-1",children:[i.jsx("span",{className:"text-gray-600",children:"Portfolios:"}),i.jsx("span",{className:"font-medium",children:e.limits.portfolios})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center py-1",children:[i.jsx("span",{className:"text-gray-600",children:"Watchlists:"}),i.jsx("span",{className:"font-medium",children:e.limits.watchlists})]})]}),i.jsx("div",{className:"space-y-2",children:e.features.map((e,s)=>(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[i.jsx(d.Z,{className:"w-4 h-4 text-green-500 flex-shrink-0"}),i.jsx("span",{className:"text-sm text-gray-700",children:e})]},s))})]}),i.jsx("button",{onClick:()=>handleSubscribe(e.id),disabled:p===e.id,className:`w-full py-3 px-4 rounded-lg font-medium transition-colors ${"premium"===e.buttonVariant?"bg-gradient-to-r from-purple-600 to-blue-600 text-white hover:from-purple-700 hover:to-blue-700":"primary"===e.buttonVariant?"bg-blue-600 text-white hover:bg-blue-700":"border border-gray-300 text-gray-700 hover:bg-gray-50"} disabled:opacity-50 disabled:cursor-not-allowed`,children:p===e.id?"Processing...":e.buttonText})]},e.id))})}),i.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 rounded-b-2xl",children:i.jsx("p",{className:"text-center text-sm text-gray-600",children:"All plans include a 7-day free trial. Cancel anytime."})})]})})},m=PricingPopup},2724:(e,s,t)=>{t.d(s,{hJ:()=>FeatureAccess,i1:()=>ProtectedRoute});var i=t(784),r=t(9885),a=t(9033),l=t(1280),n=t(9214),c=t(7114),d=t(87),o=t(3294),u=t(4901);let ProtectedRoute=({children:e,requiredPlan:s="free",feature:t,title:u,description:m,fallback:x,redirectOnFail:p=!1})=>{let{user:h,isLoading:b,checkSubscriptionAccess:g}=(0,a.useAuth)(),{popupState:f,showPricingPopup:j,hidePricingPopup:y}=(0,l.y)(),N=(0,c.useRouter)(),[v,w]=(0,r.useState)(null);return((0,r.useEffect)(()=>{if(!b&&h){let e=g(s);w(e),e||(p?N.push("/pricing?upgrade=true&feature="+encodeURIComponent(t||"premium")):"free"!==s&&j(t||"premium-feature",s,u,m))}},[h,b,s,t,u,m,g,j,p,N]),b||null===v)?i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,i.jsxs)("div",{className:"text-center",children:[i.jsx(d.Z,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-blue-600"}),i.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):v?(0,i.jsxs)(i.Fragment,{children:[e,i.jsx(n.Z,{isOpen:f.isVisible,onClose:y,feature:f.feature,requiredPlan:f.plan,title:f.title,description:f.description})]}):x?(0,i.jsxs)(i.Fragment,{children:[x,i.jsx(n.Z,{isOpen:f.isVisible,onClose:y,feature:f.feature,requiredPlan:f.plan,title:f.title,description:f.description})]}):(0,i.jsxs)(i.Fragment,{children:[i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,i.jsxs)("div",{className:"text-center max-w-md mx-auto p-6",children:[i.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(o.Z,{className:"w-8 h-8 text-gray-400"})}),i.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:u||"Premium Feature"}),i.jsx("p",{className:"text-gray-600 mb-6",children:m||`This feature requires a ${s} subscription to access.`}),i.jsx("button",{onClick:()=>j(t||"premium-feature",s,u,m),className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"View Pricing Plans"})]})}),i.jsx(n.Z,{isOpen:f.isVisible,onClose:y,feature:f.feature,requiredPlan:f.plan,title:f.title,description:f.description})]})},FeatureAccess=({requiredPlan:e,feature:s,title:t,description:r,children:c,fallback:d,showUpgradeButton:o=!0})=>{let{checkSubscriptionAccess:m}=(0,a.useAuth)(),{popupState:x,showPricingPopup:p,hidePricingPopup:h}=(0,l.y)(),b=m(e);return b?i.jsx(i.Fragment,{children:c}):d?(0,i.jsxs)(i.Fragment,{children:[d,i.jsx(n.Z,{isOpen:x.isVisible,onClose:h,feature:x.feature,requiredPlan:x.plan,title:x.title,description:x.description})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 bg-gray-50 bg-opacity-90 flex items-center justify-center z-10 rounded-lg",children:(0,i.jsxs)("div",{className:"text-center p-4",children:[i.jsx(u.Z,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-gray-600 mb-3",children:t||`${e.charAt(0).toUpperCase()+e.slice(1)} plan required`}),o&&i.jsx("button",{onClick:()=>p(s||"premium-feature",e,t,r),className:"bg-blue-600 text-white px-4 py-2 rounded text-sm font-medium hover:bg-blue-700 transition-colors",children:"Upgrade"})]})}),i.jsx("div",{className:"filter blur-sm pointer-events-none",children:c})]}),i.jsx(n.Z,{isOpen:x.isVisible,onClose:h,feature:x.feature,requiredPlan:x.plan,title:x.title,description:x.description})]})}},1280:(e,s,t)=>{t.d(s,{y:()=>usePricingPopup});var i=t(9885);let usePricingPopup=()=>{let[e,s]=(0,i.useState)({isVisible:!1}),t=(0,i.useCallback)((e,t,i,r)=>{s({isVisible:!0,feature:e,plan:t,title:i,description:r})},[]),r=(0,i.useCallback)(()=>{s({isVisible:!1})},[]);return{popupState:e,showPricingPopup:t,hidePricingPopup:r,isPricingPopupVisible:e.isVisible}}}};